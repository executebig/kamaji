<!DOCTYPE html>
<html>
  <head>
    <title>Mass</title>
    <link rel="stylesheet" href="/css/style.css" />

    <link
      href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div>
      <h1>My templates</h1>
      <% for (const template of templates) { %>
        <a href="/templates/<%= template.id %>"><%= template.name %></a>
      <% } %>
    </div>

    <form id="form" action="" method="post">
      <input type="hidden" name="content" />
      <div id="editor">
        <p>Hello World!</p>
        <p>Some initial <strong>bold</strong> text</p>
        <p><br /></p>
      </div>

      <input name="name" type="text" />
      <input name="engine" type="text" />
      <button type="submit">Submit</button>
    </form>

    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script>
      Quill.prototype.getHtml = function () {
        return this.container.querySelector('.ql-editor').innerHTML
      }

      const quill = new Quill('#editor', {
        theme: 'snow'
      })

      const form = document.querySelector('#form')

      form.addEventListener('submit', () => {
        form.querySelector('input[name="content"]').value = JSON.stringify(
          quill.getHtml()
        )
      })
    </script>
  </body>
</html>
